import{c as n}from"./helpers-482089f4.js";let m=[];chrome.storage.sync.get(["storedPrompts"]).then(t=>{m=t.storedPrompts,console.log(m)});chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"addCommonPrompt",title:"Add to Common Prompts",contexts:["selection"]}),chrome.contextMenus.create({id:"commonPrompts",title:"Use Prompt",contexts:["editable"],documentUrlPatterns:["https://chat.openai.com/*"]}),chrome.storage.sync.get("storedPrompts").then(t=>{console.log(t.storedPrompts);const e=t.storedPrompts||[];if(e.length>0)for(let o=0;o<e.length;o++)e[o].active=!1,n(e[o])})});const p=async t=>{const[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0}),o=await chrome.tabs.sendMessage(e.id,{type:"usePrompt",promptId:t});console.log(o)};chrome.contextMenus.onClicked.addListener(async t=>{if(t.menuItemId==="addCommonPrompt"){const e=t.selectionText||"";chrome.storage.sync.get(["storedPrompts"]).then(o=>{let s=o.storedPrompts||[];const c=s.length===0?0:s.length,d=`Promt-${s.length==0?0:s.length}`,r={id:c,title:d,prompt:e,active:!1};s.push(r),chrome.storage.sync.set({storedPrompts:s}).then(()=>{console.log("Value is set to "+s),n(r)})})}else if(typeof t.menuItemId=="string"&&t.menuItemId.includes("prompt-")){let e=Number(t.menuItemId.split("-")[1]);p(e)}});
